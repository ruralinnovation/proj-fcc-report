---
title: "testing other eligibilities"
date: last-modified
format: 
  html:
    code-fold: true
engine: knitr
---

```{r}
#| label: utility functions
table_with_options <- function(x){DT::datatable(x, rownames = FALSE,
              extensions = 'Buttons', 
                options = list(
                          dom = 'Blfrtip',
                          buttons = list('copy', 'print', list(
                            extend = 'collection',
                            buttons = c('csv', 'excel'),
                            text = 'Download')
                                    )
                          )
            )}
```


## MS building footprint in VT

MS is producing a data set of buildings (polygons) build by computer vision (classification, convert to vector). 

As we do not care of the shape of the building we just converted to point (picking one vertex per polygon). 

We can then count those points per block and compare to the number of location than FCC is descriving.

```{r}
vt <- read.csv("data/vt_ms.csv")
vt$tot_loc <-as.numeric(vt$tot_loc) 
vt$tot_loc <- ifelse(is.na(vt$tot_loc), 0, vt$tot_loc)

lm_ms <- lm(cnt_ms ~ tot_loc, data = vt)
pot_val <- seq(min(vt$tot_loc), max(vt$tot_loc), by = 0.025)
conf_interval <- predict(lm_ms, newdata = data.frame( tot_loc = pot_val) ,
						 interval = "prediction", level = 0.95)

plot(vt$cnt_ms, vt$tot_loc,  col = 2, asp = 1, 
xlab = "cnt of MS buildings", ylab = "cnt of fcc locations") 
abline(lm_ms, col = 4)
abline(1:500, 1:500, col = "black")
lines(pot_val, conf_interval[, "lwr"], col = "blue", lty = 2)
lines(pot_val, conf_interval[, "upr"], col =" blue", lty = 2)
```

- my model (just a linear one) is probably bad (log should correct that)

- still strong relation 

- it seems MS has **more** locations (285333, versus 352618) 


## Some tl:dr

* it has heterogneous effects

* it has a big impacts
